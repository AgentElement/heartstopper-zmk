#include <dt-bindings/zmk/matrix_transform.h>

/ {
    chosen {
        zmk,kscan = &kscan0;
        zmk,matrix-transform = &default_transfrorm;
    };

    default_transfrorm: keymap_transform_0 {
        compatible = "zmk, matrix-transform";
        columns = <10>;
        rows = <4>;

        // Right shield switch layout
        // 05  01  13  11  04    RC(2, 3) RC(2, 1) RC(2, 4) RC(2, 5) RC(1, 3) 
        // 16  18  06  03  10    RC(3, 4) RC(3, 5) RC(3, 2) RC(3, 1) RC(1, 4) 
        // 14  09  08  15  02    RC(4, 2) RC(4, 1) RC(4, 5) RC(4, 3) RC(1, 2) 
        // 07  12  17            RC(5, 4) RC(5, 2) RC(5, 3)                   


        // Left shield switch layout
        // 04  11  13  01  05    RC(1, 3) RC(2, 5) RC(2, 4) RC(2, 1) RC(2, 3)
        // 10  03  06  18  16    RC(1, 4) RC(3, 1) RC(3, 2) RC(3, 5) RC(3, 4)
        // 02  15  08  09  14    RC(1, 2) RC(4, 3) RC(4, 5) RC(4, 1) RC(4, 2)
        //         17  12  07                      RC(5, 4) RC(5, 2) RC(5, 3)

        map = <
         RC(0, 2) RC(1, 4) RC(1, 3) RC(1, 0) RC(1, 2)           RC(6, 7) RC(6, 5) RC(6, 8) RC(6, 9) RC(5, 7)
         RC(0, 3) RC(2, 0) RC(2, 1) RC(2, 4) RC(2, 3)           RC(7, 8) RC(7, 9) RC(7, 6) RC(7, 5) RC(5, 8)
         RC(0, 1) RC(3, 2) RC(3, 4) RC(3, 0) RC(3, 1)           RC(8, 6) RC(8, 5) RC(8, 9) RC(8, 7) RC(5, 6)
                           RC(4, 3) RC(4, 1) RC(4, 2)           RC(9, 8) RC(9, 6) RC(9, 7)                  
        >;
    };

    kscan0: kscan {
        compatible = "zmk, kscan-gpio-charlieplex";

        interrupt-gpios = <&pro_micro 14 (GPIO_ACTIVE_HIGH | GPIO_PULL_DOWN)>;
        gpios
            = <&pro_micro 2 GPIO_ACTIVE_HIGH>
            , <&pro_micro 3 GPIO_ACTIVE_HIGH>
            , <&pro_micro 4 GPIO_ACTIVE_HIGH>
            , <&pro_micro 5 GPIO_ACTIVE_HIGH>
            , <&pro_micro 6 GPIO_ACTIVE_HIGH>;
    };
};
